<?php
return [
    'backend' => [
        'frontName' => '{{ admin_frontname|default('admin') }}',
    ],
    'install' => [
        'date' => '{{ install_date }}',
    ],
    'crypt' => [
        'key' => '{{ encryption_key }}',
    ],
    'db' => [
        'table_prefix' => '{{ table_prefix }}',
        'connection' => [
            'default' => [
                'host' => '{{ database_host }}',
                'dbname' => '{{ database_name }}',
                'username' => '{{ database_user }}',
                'password' => '{{ database_password }}',
                'model' => 'mysql4',
                'engine' => 'innodb',
                'initStatements' => 'SET NAMES utf8;',
                'active' => '1',
{#@todo Get PDO MySQL with SSL to work#}
{#{%- if database_ssl_ca %}#}

                {#'secure_driver_options' => [#}
                    {#'MYSQL_ATTR_SSL_CA' => '{{ database_ssl_ca }}'#}
                {#],#}
{#{%- endif %}#}

            ],
        ],
    ],
    'resource' => [
        'default_setup' => [
            'connection' => 'default',
        ],
    ],
    'session' => [
{%- if redis_session_host and redis_session_port %}

        'save' => 'redis',
        'redis' => [
            'host' => '{{ redis_session_host }}',
            'port' => '{{ redis_session_port }}',
            'password' => '{{ redis_session_password ? redis_session_password : ''}}',
            'timeout' => '2.5',
            'persistent_identifier' => '',
            'database' => '0',
            'compression_threshold' => '2048',
            'compression_library' => 'gzip',
            'log_level' => '1',
            'max_concurrency' => '6',
            'break_after_frontend' => '5',
            'break_after_adminhtml' => '30',
            'first_lifetime' => '600',
            'bot_first_lifetime' => '60',
            'bot_lifetime' => '7200',
            'disable_locking' => '0',
            'min_lifetime' => '60',
            'max_lifetime' => '2592000',
        ],
{%- else %}

        'save' => 'files',
{%- endif %}

    ],
{%- if (redis_object_host and redis_object_port) or (redis_fpc_host and redis_fpc_port)%}

    'cache' => [
        'frontend' => [
    {%- if redis_object_host and redis_object_port %}

            'default' => [
                'backend' => 'Cm_Cache_Backend_Redis',
                'backend_options' => [
                    'server' => '{{ redis_object_host }}',
                    'database' => '0',
                    'port' => '{{ redis_object_port }}',
                    'password' => '{{ redis_object_password ? redis_object_password : ''}}',
                ],
            ],
    {%- endif %}
    {%- if redis_fpc_host and redis_fpc_port %}

            'page_cache' => [
                'backend' => 'Cm_Cache_Backend_Redis',
                'backend_options' => [
                    'server' => '{{ redis_fpc_host }}',
                    'port' => '{{ redis_fpc_port }}',
                    'password' => '{{ redis_fpc_password ? redis_fpc_password : ''}}',
                    'database' => '0',
                    'compress_data' => '0'
                ],
            ],
        ],
    {%- endif %}

    ],
{%- endif %}

    'x-frame-options' => 'SAMEORIGIN',
    'MAGE_MODE' => 'default',
    'cache_types' => [
        'config' => 1,
        'layout' => 1,
        'block_html' => 1,
        'collections' => 1,
        'reflection' => 1,
        'db_ddl' => 1,
        'eav' => 1,
        'config_integration' => 1,
        'config_integration_api' => 1,
        'full_page' => 1,
        'translate' => 1,
        'config_webservice' => 1,
        'compiled_config' => 1,
    ],
];
